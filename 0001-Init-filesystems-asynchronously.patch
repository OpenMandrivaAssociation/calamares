From 2951c8899027fe0cb1ad76e12f838057a4517b92 Mon Sep 17 00:00:00 2001
From: Teo Mrnjavac <teo@kde.org>
Date: Wed, 20 Jul 2016 13:01:33 +0200
Subject: [PATCH] Init filesystems asynchronously.

---
 src/modules/partition/core/PartitionCoreModule.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/modules/partition/core/PartitionCoreModule.cpp b/src/modules/partition/core/PartitionCoreModule.cpp
index 09b9785..fd7801a 100644
--- a/src/modules/partition/core/PartitionCoreModule.cpp
+++ b/src/modules/partition/core/PartitionCoreModule.cpp
@@ -104,7 +104,6 @@ PartitionCoreModule::PartitionCoreModule( QObject* parent )
 {
     if ( !KPMHelpers::initKPMcore() )
         qFatal( "Failed to initialize KPMcore backend" );
-    FileSystemFactory::init();
 }
 
 
@@ -119,6 +118,8 @@ PartitionCoreModule::init()
 void
 PartitionCoreModule::doInit()
 {
+    FileSystemFactory::init();
+
     CoreBackend* backend = CoreBackendManager::self()->backend();
     QList< Device* > devices = backend->scanDevices( true );
 
-- 
2.8.3

