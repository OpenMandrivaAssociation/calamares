From 92e1233279afb9d33d7547ac72b851b4d1e5c041 Mon Sep 17 00:00:00 2001
From: Teo Mrnjavac <teo@kde.org>
Date: Mon, 12 Dec 2016 13:37:18 +0100
Subject: [PATCH 07/16] Write hasInternet to GlobalStorage. CAL-431 #close

---
 src/modules/welcome/checker/RequirementsChecker.cpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/modules/welcome/checker/RequirementsChecker.cpp b/src/modules/welcome/checker/RequirementsChecker.cpp
index 12f6817..3d7eb7d 100644
--- a/src/modules/welcome/checker/RequirementsChecker.cpp
+++ b/src/modules/welcome/checker/RequirementsChecker.cpp
@@ -338,7 +338,9 @@ bool
 RequirementsChecker::checkHasInternet()
 {
     // default to true in the QNetworkAccessManager::UnknownAccessibility case
-    return QNetworkAccessManager(this).networkAccessible() != QNetworkAccessManager::NotAccessible;
+    bool hasInternet = QNetworkAccessManager(this).networkAccessible() != QNetworkAccessManager::NotAccessible;
+    Calamares::JobQueue::instance()->globalStorage()->insert( "hasInternet", hasInternet );
+    return hasInternet;
 }
 
 
-- 
2.8.3

